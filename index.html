<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RLC 电路模拟（µH / µF & 三个波形）</title>
  <link rel="stylesheet" href="style.css?v=2025-11-12-a" />
  <!-- 强制刷新：版本跳转（放在最前面） -->
  <script>
    // 每次发布只改这里：版本号
    const BUILD_VERSION = "2025-11-12-a";

    (function forceFresh() {
      try {
        const url = new URL(window.location.href);
        if (url.searchParams.get("v") !== BUILD_VERSION) {
          url.searchParams.set("v", BUILD_VERSION);
          window.location.replace(url.toString());
        }
      } catch (e) {
        var sep = window.location.search ? "&" : "?";
        window.location.replace(window.location.href + sep + "v=" + BUILD_VERSION);
      }
    })();
  </script>

  <!-- 适配部分内置 WebView 的兼容禁缓存（可选但推荐） -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

</head>
<body>
  <div class="container">
    <!-- 顶部标题 -->
    <header>
      <h2>二阶电路工作状态</h2>
      <p>
        图示电路为 RLC 串联二阶电路，已知电容初始电压
        u<sub>C</sub>(0)=10V。
      </p>
    </header>

    <!-- 电路图 -->
    <div class="circuit-diagram">
      <img src="circuit.png" alt="RLC 串联电路图">
    </div>

    <!-- 参数控制区域 -->
    <div class="controls">
      <!-- R -->
      <div class="slider-group">
        <label for="r-slider">R (Ω)</label>
        <input type="range" id="r-slider" min="0" max="200" value="10" step="1">
        <span id="r-value">20</span>
      </div>

      <!-- L（µH） -->
      <div class="slider-group">
        <label for="l-slider">L (mH)</label>
        <input type="range" id="l-slider" min="1" max="500" value="10" step="1">
        <span id="l-value">10</span>
      </div>

      <!-- C（µF） -->
      <div class="slider-group">
        <label for="c-slider">C (µF)</label>
        <input type="range" id="c-slider" min="0.1" max="100" value="10" step="0.1">
        <span id="c-value">10.0</span>
      </div>

      <!-- E：直流电压源 -->
      <div class="slider-group">
        <label for="e-slider">Us (V)</label>
        <input type="range" id="e-slider" min="0" max="20" value="10" step="0.5">
        <span id="e-value">10.0</span>
      </div>
    </div>

    <!-- 图表：电容电压 -->
    <div class="chart-block">
      <div class="chart-header">
        <h3>电容电压波形</h3>
        <div id="status-display">状态: ——</div>
      </div>
      <div class="custom-legend">
        <span class="legend-dot" style="background:#3498db"></span>
        <span class="legend-text">u<sub>C</sub>(t)</span>
      </div>
      <div class="chart-wrap">
        <div class="y-axis-label">u<sub>C</sub>/V</div>
        <div id="chart-uc"></div>
      </div>
    </div>

    <!-- 图表：电阻电压 -->
    <div class="chart-block">
      <div class="chart-header">
        <h3>电阻电压波形</h3>
      </div>
      <div class="custom-legend">
        <span class="legend-dot" style="background:#e67e22"></span>
        <span class="legend-text">u<sub>R</sub>(t)</span>
      </div>
      <div class="chart-wrap">
        <div class="y-axis-label">u<sub>R</sub>/V</div>
        <div id="chart-ur"></div>
      </div>
    </div>

    <!-- 图表：电感电压 -->
    <div class="chart-block">
      <div class="chart-header">
        <h3>电感电压波形</h3>
      </div>
      <div class="custom-legend">
        <span class="legend-dot" style="background:#8e44ad"></span>
        <span class="legend-text">u<sub>L</sub>(t)</span>
      </div>
      <div class="chart-wrap">
        <div class="y-axis-label">u<sub>L</sub>/V</div>
        <div id="chart-ul"></div>
      </div>
    </div>
  </div>

  <!-- ECharts：CDN + 本地兜底 + defer -->
  <script defer src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js?v=2025-11-12-a"></script>
  <script>
    if (typeof window.echarts === 'undefined') {
      document.write('<script defer src="libs/echarts.min.js?v=2025-11-12-a"><\/script>');
    }
  </script>
  <script defer src="script.js?v=2025-11-12-a"></script>
</body>
</html>
